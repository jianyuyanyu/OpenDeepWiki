# 实现计划: 提示词优化

## 概述

本实现计划将优化 OpenDeepWiki 的三个 Wiki 生成提示词，使其具有统一的结构、清晰的工具使用指导、完善的错误处理机制和高质量的输出规范。

## 任务

- [x] 1. 重构 catalog-generator.md 提示词
  - [x] 1.1 添加统一的章节结构（角色定义、上下文、工具说明、任务说明、执行步骤、输出格式、错误处理、质量检查、示例）
    - 按照设计文档中的统一结构重构提示词
    - _需求: 7.1, 7.3, 7.4, 7.5_
  
  - [x] 1.2 添加详细的工具使用指南
    - 为 GitTool.ListFiles、GitTool.Read、GitTool.Grep 添加参数说明和最佳实践
    - 为 CatalogTool.ReadAsync、CatalogTool.WriteAsync 添加使用说明
    - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_
  
  - [x] 1.3 添加完整的 JSON Schema 和输出格式规范
    - 定义目录结构的 JSON Schema
    - 提供有效和无效输出的示例
    - _需求: 2.1, 2.2, 2.6_
  
  - [x] 1.4 添加错误处理指导
    - 添加文件不存在、二进制文件、超大文件的处理策略
    - 添加 JSON 格式错误的修正指导
    - _需求: 3.1, 3.2, 3.3, 3.5, 3.6_
  
  - [x] 1.5 添加执行效率优化指导
    - 添加先 ListFiles 后选择性读取的策略
    - 添加关键文件优先级规则
    - _需求: 5.1, 5.3, 5.5, 5.6_
  
  - [x] 1.6 添加多语言支持指导
    - 添加语言参数使用说明
    - 添加中英文输出规则
    - _需求: 4.1, 4.2, 4.3, 4.4, 4.5_

- [x] 2. 重构 content-generator.md 提示词
  - [x] 2.1 添加统一的章节结构
    - 按照设计文档中的统一结构重构提示词
    - _需求: 7.1, 7.3, 7.4, 7.5_
  
  - [x] 2.2 添加详细的工具使用指南
    - 为 GitTool 方法添加参数说明和最佳实践
    - 为 DocTool.ReadAsync、DocTool.WriteAsync、DocTool.EditAsync 添加使用说明
    - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_
  
  - [x] 2.3 添加 Markdown 文档结构模板和规范
    - 定义标准文档结构（标题、概述、内容、示例、配置、API、链接）
    - 提供 API 文档的详细格式要求
    - _需求: 2.3, 2.4, 6.3_
  
  - [x] 2.4 添加错误处理指导
    - 添加文件读取错误的处理策略
    - 添加 DocTool.Edit 失败时的回退策略
    - _需求: 3.1, 3.2, 3.4, 3.5, 3.6_
  
  - [x] 2.5 添加内容质量提升指导
    - 添加从代码提取示例的指导
    - 添加解释设计意图的指导
    - 添加语法高亮和表格使用指导
    - _需求: 6.1, 6.2, 6.4, 6.5, 6.6_
  
  - [x] 2.6 添加多语言支持指导
    - 添加语言参数使用说明
    - 添加文档风格调整规则
    - _需求: 4.1, 4.2, 4.3, 4.4, 4.6_

- [x] 3. 重构 incremental-updater.md 提示词
  - [x] 3.1 添加统一的章节结构
    - 按照设计文档中的统一结构重构提示词
    - _需求: 7.1, 7.3, 7.4, 7.5_
  
  - [x] 3.2 添加详细的工具使用指南
    - 为所有三个工具（GitTool、CatalogTool、DocTool）添加完整说明
    - _需求: 1.1, 1.2, 1.3, 1.4, 1.5, 1.6_
  
  - [x] 3.3 添加变更分析报告格式规范
    - 定义影响范围分析格式
    - 定义需要更新的文档列表格式
    - _需求: 2.5, 2.6_
  
  - [x] 3.4 添加错误处理指导
    - 添加所有工具的错误处理策略
    - 添加增量更新特有的错误场景处理
    - _需求: 3.1, 3.2, 3.3, 3.4, 3.5, 3.6_
  
  - [x] 3.5 添加执行效率优化指导
    - 添加仅更新受影响文档的策略
    - 添加批量处理指导
    - _需求: 5.2, 5.4, 5.6_
  
  - [x] 3.6 添加多语言支持指导
    - 添加语言参数使用说明
    - 添加更新时保持语言一致性的规则
    - _需求: 4.1, 4.2, 4.3, 4.4_

- [x] 4. 检查点 - 验证提示词结构一致性
  - 确保所有三个提示词具有相同的章节结构
  - 确保变量命名规范一致
  - 如有问题请询问用户


## 备注

- 标记 `*` 的任务为可选任务，可跳过以加快 MVP 开发
- 每个任务都引用了具体的需求以便追溯
- 检查点用于确保增量验证
- 属性测试验证通用正确性属性
- 单元测试验证特定示例和边界情况
